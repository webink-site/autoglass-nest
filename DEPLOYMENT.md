# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é Autoglass

–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é NestJS API + Nuxt.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–∞ VPS —Å PostgreSQL, Redis –∏ Nginx.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ VPS](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-vps)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–¥–æ–º–µ–Ω–∞)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-github-actions)
- [–ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π](#–ø–µ—Ä–≤—ã–π-–¥–µ–ø–ª–æ–π)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ)
- [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ VPS:
- **CPU**: 2 vCore
- **RAM**: 4 GB
- **–î–∏—Å–∫**: 40 GB SSD
- **–û–°**: Ubuntu 20.04/22.04 LTS
- **–°–µ—Ç—å**: 1 Gbps

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **CPU**: 4 vCore  
- **RAM**: 8 GB
- **–î–∏—Å–∫**: 80 GB SSD

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã:
- –î–æ–º–µ–Ω —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS
- VPS —Å –ø—É–±–ª–∏—á–Ω—ã–º IP
- GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- Email –¥–ª—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

## üñ•Ô∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ VPS

### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH
ssh root@YOUR_SERVER_IP

# –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
adduser deploy
usermod -aG sudo deploy

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH –∫–ª—é—á –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
mkdir -p /home/deploy/.ssh
cp ~/.ssh/authorized_keys /home/deploy/.ssh/
chown -R deploy:deploy /home/deploy/.ssh
chmod 700 /home/deploy/.ssh
chmod 600 /home/deploy/.ssh/authorized_keys

# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
su - deploy
```

### 2. –ó–∞–ø—É—Å–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –°–∫–∞—á–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
wget https://raw.githubusercontent.com/YOUR_USERNAME/autoglass-nest/main/scripts/init-server.sh
chmod +x init-server.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
./init-server.sh

# –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
sudo reboot
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker
docker --version
docker compose version

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞
sudo ufw status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Fail2Ban
sudo systemctl status fail2ban
```

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞

### 1. DNS –∑–∞–ø–∏—Å–∏

–í –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–∏–º –¥–æ–º–µ–Ω–æ–º —Å–æ–∑–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏:

```
–¢–∏–ø    –ò–º—è              –ó–Ω–∞—á–µ–Ω–∏–µ           TTL
A      @                YOUR_SERVER_IP     300
A      www              YOUR_SERVER_IP     300
AAAA   @                YOUR_SERVER_IPv6   300  (–µ—Å–ª–∏ –µ—Å—Ç—å IPv6)
AAAA   www              YOUR_SERVER_IPv6   300  (–µ—Å–ª–∏ –µ—Å—Ç—å IPv6)
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ–º–µ–Ω —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
nslookup your-domain.com
ping your-domain.com
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

```bash
# –°–Ω–∞—á–∞–ª–∞ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Nginx –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
sudo systemctl stop nginx

# –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot --standalone -d your-domain.com -d www.your-domain.com --email admin@your-domain.com --agree-tos --non-interactive

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ webroot –º–µ—Ç–æ–¥ (–µ—Å–ª–∏ Nginx —É–∂–µ –∑–∞–ø—É—â–µ–Ω)
sudo certbot --webroot -w /var/www/certbot -d your-domain.com -d www.your-domain.com
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH –∫–ª—é—á–∞ –¥–ª—è –¥–µ–ø–ª–æ—è

–ù–∞ –≤–∞—à–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:

```bash
# –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π SSH –∫–ª—é—á
ssh-keygen -t ed25519 -C "deploy@your-domain.com" -f ~/.ssh/autoglass_deploy

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh-copy-id -i ~/.ssh/autoglass_deploy.pub deploy@YOUR_SERVER_IP

# –í—ã–≤–µ–¥–∏—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è GitHub Secrets)
cat ~/.ssh/autoglass_deploy
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ GitHub –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí Secrets and variables ‚Üí Actions –∏ –¥–æ–±–∞–≤—å—Ç–µ:

```
–ù–∞–∑–≤–∞–Ω–∏–µ              –ó–Ω–∞—á–µ–Ω–∏–µ
VPS_HOST             YOUR_SERVER_IP –∏–ª–∏ your-domain.com
VPS_USER             deploy
SSH_PRIVATE_KEY      (—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ ~/.ssh/autoglass_deploy)
POSTGRES_DB          aglass
POSTGRES_USER        postgres
POSTGRES_PASSWORD    –≤–∞—à_–±–µ–∑–æ–ø–∞—Å–Ω—ã–π_–ø–∞—Ä–æ–ª—å
JWT_SECRET           —Å–ª—É—á–∞–π–Ω–∞—è_—Å—Ç—Ä–æ–∫–∞_32+_—Å–∏–º–≤–æ–ª–æ–≤
REDIS_PASSWORD       –≤–∞—à_redis_–ø–∞—Ä–æ–ª—å
```

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π

```bash
# JWT Secret (32+ —Å–∏–º–≤–æ–ª–æ–≤)
openssl rand -base64 32

# –ü–∞—Ä–æ–ª–∏ –¥–ª—è –ë–î –∏ Redis
openssl rand -base64 24
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–π GitHub

–í Settings ‚Üí Environments —Å–æ–∑–¥–∞–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ `production` —Å –∑–∞—â–∏—Ç–æ–π main –≤–µ—Ç–∫–∏.

## üöÄ –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
mkdir -p ~/autoglass
cd ~/autoglass

# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env.prod
nano .env.prod  # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

### 2. –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

```bash
# –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
git clone https://github.com/YOUR_USERNAME/autoglass-nest.git temp
cp temp/docker-compose.prod.yml ~/autoglass/
cp -r temp/nginx ~/autoglass/
rm -rf temp

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
nano ~/autoglass/nginx/sites-available/autoglass.conf
# –ó–∞–º–µ–Ω–∏—Ç–µ your-domain.com –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
cd ~/autoglass
./scripts/deploy.sh
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ —Å–¥–µ–ª–∞–π—Ç–µ –∫–æ–º–º–∏—Ç –≤ main –≤–µ—Ç–∫—É
git add .
git commit -m "feat: setup production deployment"
git push origin main
```

GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ó–∞–ø—É—Å—Ç–∏—Ç —Ç–µ—Å—Ç—ã
2. –°–æ–±–µ—Ä–µ—Ç Docker –æ–±—Ä–∞–∑
3. –†–∞–∑–≤–µ—Ä–Ω–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–∏—Å–æ–≤

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
cd ~/autoglass
docker compose -f docker-compose.prod.yml ps

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker compose -f docker-compose.prod.yml logs -f api
docker compose -f docker-compose.prod.yml logs -f nginx

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
./scripts/deploy.sh status

# –°–∏—Å—Ç–µ–º–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/usr/local/bin/server-stats.sh
```

### 2. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –ë–î
./scripts/deploy.sh backup

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –±—ç–∫–∞–ø–∞ (cron)
crontab -e
# –î–æ–±–∞–≤—å—Ç–µ:
# 0 2 * * * /home/deploy/autoglass/scripts/deploy.sh backup

# –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Ñ–∞–π–ª–æ–≤
tar -czf backup_$(date +%Y%m%d).tar.gz uploads/ logs/
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```bash
# –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Let's Encrypt (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
sudo systemctl status certbot.timer

# –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo certbot renew --dry-run
sudo certbot renew
```

### 4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å–∏—Å—Ç–µ–º—ã
sudo journalctl -u docker
tail -f ~/autoglass/logs/nginx/access.log

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
df -h

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏
free -h
htop
```

## üîß –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### 1. –î–µ–ø–ª–æ–π Nuxt.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```bash
# –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ—Ö–æ–∂–∏–π GitHub Action
# –ö–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –±–∏–ª–¥–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ ~/autoglass/frontend/dist/

# –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
~/autoglass/
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îî‚îÄ‚îÄ dist/          # –°–±–æ—Ä–∫–∞ Nuxt.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ index.html
‚îÇ       ‚îú‚îÄ‚îÄ _nuxt/
‚îÇ       ‚îî‚îÄ‚îÄ ...
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

```bash
# –ï—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
cd ~/frontend-repo
npm run build
rsync -av dist/ deploy@your-server:/home/deploy/autoglass/frontend/dist/

# Nginx –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–ø—É—Å–∫–æ–º

```bash
# –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
docker compose -f docker-compose.prod.yml logs api

# –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
docker compose -f docker-compose.prod.yml exec postgres psql -U postgres -d aglass

# –ü—Ä–æ–±–ª–µ–º—ã —Å Nginx
docker compose -f docker-compose.prod.yml exec nginx nginx -t
sudo nginx -t
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å SSL

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot certificates
openssl x509 -in /etc/letsencrypt/live/your-domain.com/fullchain.pem -text -noout

# –ü–µ—Ä–µ–≤—ã–ø—É—Å–∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot --force-renewal -d your-domain.com
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å GitHub Actions

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ secrets –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SSH –∫–ª—é—á –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ workflow –≤ GitHub
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ—è

```bash
# –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
cd ~/autoglass
./scripts/deploy.sh rollback

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
./scripts/deploy.sh backup  # –°–æ–∑–¥–∞—Ç—å —Ç–µ–∫—É—â–∏–π –±—ç–∫–∞–ø
docker compose -f docker-compose.prod.yml exec postgres psql -U postgres -d aglass < backups/db_backup_YYYYMMDD_HHMMSS.sql
```

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# Nginx –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ)
# Redis –¥–ª—è API –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
# PostgreSQL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ docker-compose

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
docker stats
htop
```

### 2. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ API
# –í docker-compose.prod.yml –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
# deploy:
#   replicas: 3

# –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
# –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã VPS
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é)
sudo apt update && sudo apt upgrade -y

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Docker –æ–±—Ä–∞–∑–æ–≤
cd ~/autoglass
docker compose -f docker-compose.prod.yml pull
docker compose -f docker-compose.prod.yml up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
sudo fail2ban-client status
sudo ufw status
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –∞—Ç–∞–∫
sudo tail -f /var/log/fail2ban.log
sudo tail -f /var/log/auth.log

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ç–µ–≤—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
sudo netstat -tulpn
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `./scripts/deploy.sh logs`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `./scripts/deploy.sh status`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã: `./scripts/deploy.sh restart`
4. –í –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ: `./scripts/deploy.sh rollback`

---

## –ß–µ–∫-–ª–∏—Å—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

- [ ] VPS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ SSH
- [ ] –î–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ–ª—É—á–µ–Ω
- [ ] GitHub Secrets –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ
- [ ] API –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ https://your-domain.com/api
- [ ] –§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ https://your-domain.com
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

**–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Autoglass —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ!**
