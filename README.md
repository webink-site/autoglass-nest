# ๐ Autoglass - Backend API

NestJS REST API ะดะปั ะฒะตะฑ-ัะฐะนัะฐ ะฐะฒัะพััะตะบะปะฐ ั ะฐะดะผะธะฝ-ะฟะฐะฝะตะปัั ะธ ะธะฝัะตะณัะฐัะธะตะน ั ััะพะฝัะตะฝะดะพะผ ะฝะฐ Nuxt.js.

## ๐ ะัััััะน ััะฐัั

### ะะพะบะฐะปัะฝะฐั ัะฐะทัะฐะฑะพัะบะฐ

```bash
# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
npm install

# ะะฐัััะพะนะบะฐ ะฑะฐะทั ะดะฐะฝะฝัั
docker compose up -d postgres
npx prisma migrate dev
npx prisma db seed

# ะะฐะฟััะบ ะฒ ัะตะถะธะผะต ัะฐะทัะฐะฑะพัะบะธ
npm run start:dev
```

API ะฑัะดะตั ะดะพัััะฟะตะฝ ะฟะพ ะฐะดัะตัั: http://localhost:3001

### Production ัะฐะทะฒะตัััะฒะฐะฝะธะต

ะะพะปะฝะฐั ะธะฝััััะบัะธั ะฟะพ ัะฐะทะฒะตัััะฒะฐะฝะธั ะฒ ัะฐะนะปะต [DEPLOYMENT.md](./DEPLOYMENT.md)

ะัััััะน ะดะตะฟะปะพะน:
```bash
# 1. ะะฐัััะพะนัะต VPS ัะตัะฒะตั
./scripts/init-server.sh

# 2. ะะฐัััะพะนัะต GitHub Secrets
# 3. Push ะฒ main ะฒะตัะบั - ะฐะฒัะพะผะฐัะธัะตัะบะธะน ะดะตะฟะปะพะน ัะตัะตะท GitHub Actions
```

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Nuxt.js       โโโโโถโ   Nginx         โโโโโถโ   NestJS API    โ
โ   Frontend      โ    โ   Reverse Proxy โ    โ   (Port 3001)   โ
โ                 โ    โ   SSL/HTTPS     โ    โ                 โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
                                                         โ
                       โโโโโโโโโโโโโโโโโโโ              โ
                       โ   Redis         โโโโโโโโโโโโโโโโค
                       โ   (ะะตัะธัะพะฒะฐะฝะธะต) โ              โ
                       โโโโโโโโโโโโโโโโโโโ              โ
                                                         โ
                       โโโโโโโโโโโโโโโโโโโ              โ
                       โ   PostgreSQL    โโโโโโโโโโโโโโโโ
                       โ   (ะะฐะทะฐ ะดะฐะฝะฝัั) โ
                       โโโโโโโโโโโโโโโโโโโ
```

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
autoglass-nest/
โโโ src/                    # ะััะพะดะฝัะน ะบะพะด
โ   โโโ globals/           # ะะปะพะฑะฐะปัะฝัะต ะฝะฐัััะพะนะบะธ
โ   โโโ service/           # ะะพะดัะปั ััะปัะณ
โ   โโโ wrap/              # ะะพะดัะปั ะพะบะปะตะนะบะธ
โ   โโโ gallery/           # ะะพะดัะปั ะณะฐะปะตัะตะธ
โ   โโโ file/              # ะะพะดัะปั ัะฐะนะปะพะฒ
โ   โโโ form/              # ะะพะดัะปั ัะพัะผ
โ   โโโ prisma/            # Prisma ORM
โโโ prisma/                # ะกัะตะผะฐ ะธ ะผะธะณัะฐัะธะธ ะะ
โโโ scripts/               # ะกะบัะธะฟัั ัะฐะทะฒะตัััะฒะฐะฝะธั
โโโ nginx/                 # ะะพะฝัะธะณััะฐัะธั Nginx
โโโ .github/workflows/     # GitHub Actions CI/CD
โโโ docker-compose.yml     # Dev ะพะบััะถะตะฝะธะต
โโโ docker-compose.prod.yml # Production ะพะบััะถะตะฝะธะต
โโโ Dockerfile            # Docker ะพะฑัะฐะท
โโโ DEPLOYMENT.md         # ะะพะปะฝะฐั ะธะฝััััะบัะธั ะฟะพ ะดะตะฟะปะพั
```

## ๐๏ธ ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั

### ะะฐะทัะฐะฑะพัะบะฐ
```bash
npm run start:dev          # ะะฐะฟััะบ ั hot reload
npm run start:debug        # ะะฐะฟััะบ ั debug
npm run build              # ะกะฑะพัะบะฐ
npm run start:prod         # ะะฐะฟััะบ production
```

### ะะฐะทะฐ ะดะฐะฝะฝัั
```bash
npx prisma migrate dev     # ะัะธะผะตะฝะธัั ะผะธะณัะฐัะธะธ
npx prisma db seed         # ะะฐะฟะพะปะฝะธัั ัะตััะพะฒัะผะธ ะดะฐะฝะฝัะผะธ
npx prisma studio          # ะะตะฑ-ะธะฝัะตััะตะนั ะะ
npx prisma generate        # ะกะณะตะฝะตัะธัะพะฒะฐัั ะบะปะธะตะฝั
```

### ะขะตััะธัะพะฒะฐะฝะธะต
```bash
npm run test               # Unit ัะตััั
npm run test:e2e           # E2E ัะตััั
npm run test:cov           # ะะพะบัััะธะต ะบะพะดะฐ
```

### Docker
```bash
# Development
docker compose up -d

# Production
docker compose -f docker-compose.prod.yml up -d
```

## ๐ง API Endpoints

### ะัะฝะพะฒะฝัะต ัะฝะดะฟะพะธะฝัั:
- `GET /health` - ะัะพะฒะตัะบะฐ ัะพััะพัะฝะธั API
- `GET /api/globals` - ะะปะพะฑะฐะปัะฝัะต ะฝะฐัััะพะนะบะธ
- `GET /api/services` - ะกะฟะธัะพะบ ััะปัะณ
- `GET /api/services/:id` - ะะตัะฐะปะธ ััะปัะณะธ
- `GET /api/wrap/elements` - ะญะปะตะผะตะฝัั ะพะบะปะตะนะบะธ
- `GET /api/gallery` - ะะฐะปะตัะตั ะธะทะพะฑัะฐะถะตะฝะธะน
- `POST /api/files/upload` - ะะฐะณััะทะบะฐ ัะฐะนะปะพะฒ

### ะะพะบัะผะตะฝัะฐัะธั API:
API ะดะพะบัะผะตะฝัะฐัะธั ะฑัะดะตั ะดะพัััะฟะฝะฐ ะฟะพ ะฐะดัะตัั `/api/docs` (Swagger) ะฟะพัะปะต ะทะฐะฟััะบะฐ ะฟัะธะปะพะถะตะฝะธั.

## ๐ ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ

### โ ะะตะฐะปะธะทะพะฒะฐะฝะพ:
- REST API ั ะฒะฐะปะธะดะฐัะธะตะน ะดะฐะฝะฝัั
- ะะฐะณััะทะบะฐ ะธ ะพะฑัะฐะฑะพัะบะฐ ะธะทะพะฑัะฐะถะตะฝะธะน/ะฒะธะดะตะพ
- ะะฐะทะฐ ะดะฐะฝะฝัั PostgreSQL ั Prisma ORM
- Docker ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั
- CI/CD ัะตัะตะท GitHub Actions
- Nginx reverse proxy ั SSL
- Health checks ะธ ะผะพะฝะธัะพัะธะฝะณ
- ะะฒัะพะผะฐัะธัะตัะบะพะต ัะตะทะตัะฒะฝะพะต ะบะพะฟะธัะพะฒะฐะฝะธะต

### ๐ง ะ ะฟะปะฐะฝะฐั:
- WebSocket ะดะปั real-time ัะฒะตะดะพะผะปะตะฝะธะน
- ะะฝัะตะณัะฐัะธั ั Telegram Bot
- Email ัะฒะตะดะพะผะปะตะฝะธั
- ะะดะผะธะฝ-ะฟะฐะฝะตะปั
- ะะฝัะตะณัะฐัะธั ั CRM ัะธััะตะผะฐะผะธ

## ๐ ะะพะฝะธัะพัะธะฝะณ

```bash
# ะกัะฐััั ัะตัะฒะธัะพะฒ
./scripts/deploy.sh status

# ะะพะณะธ API
./scripts/deploy.sh logs api

# ะะพะณะธ Nginx
./scripts/deploy.sh logs nginx

# ะกะธััะตะผะฝะฐั ััะฐัะธััะธะบะฐ
/usr/local/bin/server-stats.sh
```

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- JWT ัะพะบะตะฝั ะดะปั ะฐััะตะฝัะธัะธะบะฐัะธะธ
- Rate limiting ะฝะฐ API ะธ auth ัะฝะดะฟะพะธะฝัั
- CORS ะฝะฐัััะพะนะบะธ
- ะะฐะปะธะดะฐัะธั ะฒัะตั ะฒัะพะดะฝัั ะดะฐะฝะฝัั
- ะคะฐะนัะฒะพะป ะธ Fail2Ban ะฝะฐ ัะตัะฒะตัะต
- SSL/TLS ัะธััะพะฒะฐะฝะธะต
- Docker security best practices

## ๐ ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

ะกะบะพะฟะธััะนัะต `.env.example` ะฒ `.env` ะธ ะทะฐะฟะพะปะฝะธัะต ะทะฝะฐัะตะฝะธั:

```bash
cp .env.example .env
nano .env
```

ะัะฝะพะฒะฝัะต ะฟะตัะตะผะตะฝะฝัะต:
- `DATABASE_URL` - ะกััะพะบะฐ ะฟะพะดะบะปััะตะฝะธั ะบ PostgreSQL
- `JWT_SECRET` - ะกะตะบัะตัะฝัะน ะบะปัั ะดะปั JWT (ะผะธะฝ. 32 ัะธะผะฒะพะปะฐ)
- `REDIS_PASSWORD` - ะะฐัะพะปั Redis
- `NODE_ENV` - ะะบััะถะตะฝะธะต (development/production)

## ๐ค ะะบะปะฐะด ะฒ ะฟัะพะตะบั

1. Fork ัะตะฟะพะทะธัะพัะธั
2. ะกะพะทะดะฐะนัะต feature ะฒะตัะบั (`git checkout -b feature/amazing-feature`)
3. Commit ะธะทะผะตะฝะตะฝะธะน (`git commit -m 'Add amazing feature'`)
4. Push ะฒ ะฒะตัะบั (`git push origin feature/amazing-feature`)
5. ะัะบัะพะนัะต Pull Request

## ๐ ะะธัะตะฝะทะธั

ะญัะพั ะฟัะพะตะบั ะธัะฟะพะปัะทัะตั ะปะธัะตะฝะทะธั MIT. ะะพะดัะพะฑะฝะพััะธ ะฒ ัะฐะนะปะต [LICENSE](LICENSE).

## ๐ ะะพะดะดะตัะถะบะฐ

ะัะธ ะฒะพะทะฝะธะบะฝะพะฒะตะฝะธะธ ะฟัะพะฑะปะตะผ:

1. ะัะพะฒะตัััะต [DEPLOYMENT.md](./DEPLOYMENT.md) ะดะปั ะดะตัะฐะปัะฝัั ะธะฝััััะบัะธะน
2. ะะทััะธัะต ะปะพะณะธ: `./scripts/deploy.sh logs`
3. ะกะพะทะดะฐะนัะต Issue ะฒ GitHub ัะตะฟะพะทะธัะพัะธะธ

---

**ะะพะผะฐะฝะดะฐ ัะฐะทัะฐะฑะพัะบะธ Autoglass** โญ
